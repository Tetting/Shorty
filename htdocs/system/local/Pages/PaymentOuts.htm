{#ajaxTemplate2#}<span class="PaymentOutsBigIcon BigIcon TaskEdit4" task="Project4.Task" component="PaymentOuts_ProtoHeader">Utbetalningar</span> 

<span class="EditIcons"></span><br/>

(!@-!)
if ((ns.data)&&(!ns['forceRead'])) {(!@+!)

<span class="EditIcons"><span class="TaskEdit4" Task="Project4.Task" Component="PaymentOutList_fields"> </span>
(!@-!)
if (ns.Recordset) {
if (ns.Recordset.Hits ==0) {
out.push('<i>0 Poster');
} else {
out.push('<i>Post '+(ns.Recordset.start+1)+' till '+(ns.Recordset.Hits+ns.Recordset.start));
}
if (ns.Recordset.Count) {
if ((ns.DataView)&&(ns.DataView.filterActive==true)) {
//display filtered count..
out.push(' av '+ns.Recordset.filteredCount);
} else {
out.push(' av '+ns.Recordset.Count);
}
}
out.push('</i>');
}
(!@+!)

<a title="F&ouml;rsta" onclick="$j('#Prog(!&ns._ViewId!)').addClass('ajaxLoading');dataViews.PaymentOuts.firstPage({OnComplete:function(data,Recordset,DataView){App3.Navigate2('(!&ns._fullurl!)',{target:'(!&ns.target!)',data:data,Recordset:Recordset,DataView:DataView});$j('#Prog(!&ns._ViewId!)').removeClass('ajaxLoading');},NoNewPage:function(){$j('#Prog(!&ns._ViewId!)').removeClass('ajaxLoading');}});"><span class="RecordsetFirstIcon EditIcon">&nb(!&'sp'!);</span></a>
<a title="F&ouml;reg&aring;nde" onclick="$j('#Prog(!&ns._ViewId!)').addClass('ajaxLoading');dataViews.PaymentOuts.previousPage({OnComplete:function(data,Recordset,DataView){App3.Navigate2('(!&ns._fullurl!)',{target:'(!&ns.target!)',data:data,Recordset:Recordset,DataView:DataView});$j('#Prog(!&ns._ViewId!)').removeClass('ajaxLoading');},NoNewPage:function(){$j('#Prog(!&ns._ViewId!)').removeClass('ajaxLoading');}});"><span class="RecordsetPreviousIcon EditIcon">&nb(!&'sp'!);</span></a>
<a title="N&auml;sta" onclick="$j('#Prog(!&ns._ViewId!)').addClass('ajaxLoading');dataViews.PaymentOuts.nextPage({OnComplete:function(data,Recordset,DataView){App3.Navigate2('(!&ns._fullurl!)',{target:'(!&ns.target!)',data:data,Recordset:Recordset,DataView:DataView});$j('#Prog(!&ns._ViewId!)').removeClass('ajaxLoading');},NoNewPage:function(){$j('#Prog(!&ns._ViewId!)').removeClass('ajaxLoading');}});"><span class="RecordsetNextIcon EditIcon">&nb(!&'sp'!);</span></a>
<a title="Sista" onclick="$j('#Prog(!&ns._ViewId!)').addClass('ajaxLoading');dataViews.PaymentOuts.lastPage({OnComplete:function(data,Recordset,DataView){App3.Navigate2('(!&ns._fullurl!)',{target:'(!&ns.target!)',data:data,Recordset:Recordset,DataView:DataView});$j('#Prog(!&ns._ViewId!)').removeClass('ajaxLoading');},NoNewPage:function(){$j('#Prog(!&ns._ViewId!)').removeClass('ajaxLoading');}});"><span class="RecordsetLastIcon EditIcon">&nb(!&'sp'!);</span></a>

<input type="button" style="display:none" id="Filter_(!&ns._ViewId!)" onclick="
dataViews.PaymentOuts.clearFilter();
dataViews.PaymentOuts.addFilter('Date','=','(!&ns.Date!)');

dataViews.PaymentOuts.addFilter('Id','*',document.getElementById('Filter_PaymentOut_Id_List(!&ns._ViewId!)').value);
dataViews.PaymentOuts.addFilter('Date','*',document.getElementById('Filter_PaymentOut_Date_List(!&ns._ViewId!)').value);
dataViews.PaymentOuts.addFilter('PaymentType','*',document.getElementById('Filter_PaymentOut_PaymentType_List(!&ns._ViewId!)').value);
dataViews.PaymentOuts.addFilter('ProjectId','*',document.getElementById('Filter_PaymentOut_ProjectId_List(!&ns._ViewId!)').value);
dataViews.PaymentOuts.addFilter('OutKr','*',document.getElementById('Filter_PaymentOut_OutKr_List(!&ns._ViewId!)').value);
dataViews.PaymentOuts.addFilter('AddedBy','*',document.getElementById('Filter_PaymentOut_AddedBy_List(!&ns._ViewId!)').value);
dataViews.PaymentOuts.addFilter('PaymentSource','*',document.getElementById('Filter_PaymentOut_PaymentSource_List(!&ns._ViewId!)').value);

dataViews.PaymentOuts.getList({OnComplete:function(data,Recordset,DataView){App3.Navigate2('(!&ns._fullurl!)',{navTarget:'(!&ns.target!)',target:'(!&ns.target!)',data:data,Recordset:Recordset,DataView:DataView ,Date:'(!&ns.Date!)'});}});
"/>
<span id="Prog(!&ns._ViewId!)"></span>
</span>

<table class="ListTable" ><thead><tr>

<th width="2" class="Col_PaymentOut_Id_List"><a class="SortColumn" onclick="
dataViews.PaymentOuts.setSort('Id');
dataViews.PaymentOuts.getList({OnComplete:function(data,Recordset,DataView){App3.Navigate2('(!&ns._fullurl!)',{navTarget:'(!&ns.target!)',target:'(!&ns.target!)',data:data,Recordset:Recordset,DataView:DataView ,Date:'(!&ns.Date!)'});}});"><u>#</u></a><span class="TaskEdit4" Task="Project4.Task" Component="PaymentOut_Id_List"> </span></th>

<th width="2" class="Col_PaymentOut_Date_List"><a class="SortColumn" onclick="
dataViews.PaymentOuts.setSort('Date');
dataViews.PaymentOuts.getList({OnComplete:function(data,Recordset,DataView){App3.Navigate2('(!&ns._fullurl!)',{navTarget:'(!&ns.target!)',target:'(!&ns.target!)',data:data,Recordset:Recordset,DataView:DataView ,Date:'(!&ns.Date!)'});}});"><u>Datum</u></a><span class="TaskEdit4" Task="Project4.Task" Component="PaymentOut_Date_List"> </span></th>

<th width="2" class="Col_PaymentOut_PaymentType_List"><a class="SortColumn" onclick="
dataViews.PaymentOuts.setSort('PaymentType');
dataViews.PaymentOuts.getList({OnComplete:function(data,Recordset,DataView){App3.Navigate2('(!&ns._fullurl!)',{navTarget:'(!&ns.target!)',target:'(!&ns.target!)',data:data,Recordset:Recordset,DataView:DataView ,Date:'(!&ns.Date!)'});}});"><u>BetTyp</u></a><span class="TaskEdit4" Task="Project4.Task" Component="PaymentOut_PaymentType_List"> </span></th>

<th width="2" class="Col_PaymentOut_ProjectId_List"><a class="SortColumn" onclick="
dataViews.PaymentOuts.setSort('ProjectId');
dataViews.PaymentOuts.getList({OnComplete:function(data,Recordset,DataView){App3.Navigate2('(!&ns._fullurl!)',{navTarget:'(!&ns.target!)',target:'(!&ns.target!)',data:data,Recordset:Recordset,DataView:DataView ,Date:'(!&ns.Date!)'});}});"><u>Projekt</u></a><span class="TaskEdit4" Task="Project4.Task" Component="PaymentOut_ProjectId_List"> </span></th>

<th width="2" class="Col_PaymentOut_OutKr_List"><a class="SortColumn" onclick="
dataViews.PaymentOuts.setSort('OutKr');
dataViews.PaymentOuts.getList({OnComplete:function(data,Recordset,DataView){App3.Navigate2('(!&ns._fullurl!)',{navTarget:'(!&ns.target!)',target:'(!&ns.target!)',data:data,Recordset:Recordset,DataView:DataView ,Date:'(!&ns.Date!)'});}});"><u>OutKr</u></a><span class="TaskEdit4" Task="Project4.Task" Component="PaymentOut_OutKr_List"> </span></th>

<th width="2" class="Col_PaymentOut_AddedBy_List"><a class="SortColumn" onclick="
dataViews.PaymentOuts.setSort('AddedBy');
dataViews.PaymentOuts.getList({OnComplete:function(data,Recordset,DataView){App3.Navigate2('(!&ns._fullurl!)',{navTarget:'(!&ns.target!)',target:'(!&ns.target!)',data:data,Recordset:Recordset,DataView:DataView ,Date:'(!&ns.Date!)'});}});"><u>Anv&auml;ndare</u></a><span class="TaskEdit4" Task="Project4.Task" Component="PaymentOut_AddedBy_List"> </span></th>

<th width="2" class="Col_PaymentOut_PaymentSource_List"><a class="SortColumn" onclick="
dataViews.PaymentOuts.setSort('PaymentSource');
dataViews.PaymentOuts.getList({OnComplete:function(data,Recordset,DataView){App3.Navigate2('(!&ns._fullurl!)',{navTarget:'(!&ns.target!)',target:'(!&ns.target!)',data:data,Recordset:Recordset,DataView:DataView ,Date:'(!&ns.Date!)'});}});"><u>Typ</u></a><span class="TaskEdit4" Task="Project4.Task" Component="PaymentOut_PaymentSource_List"> </span></th>

<th width="" class="Col_Generic905"><a class="SortColumn" onclick="
dataViews.undefineds.setSort('undefined');
dataViews.undefineds.getList({OnComplete:function(data,Recordset,DataView){App3.Navigate2('(!&ns._fullurl!)',{navTarget:'(!&ns.target!)',target:'(!&ns.target!)',data:data,Recordset:Recordset,DataView:DataView ,Date:'(!&ns.Date!)'});}});"><u>Action</u></a><span class="TaskEdit4" Task="Project4.Task" Component="Generic905"> </span></th>

</tr><tr>

<td><input id="Filter_PaymentOut_Id_List(!&ns._ViewId!)" type="text" style="width:95%" value="(!@-!)out.push(dataViews.PaymentOuts.getFilter('Id','*'));(!@+!)" onkeypress="var e = (event) ? event : window.event;char=(e.charCode)?e.charCode:e.keyCode;if(char==13){$j('#Filter_(!&ns._ViewId!)').click();}"/></td>

<td><input id="Filter_PaymentOut_Date_List(!&ns._ViewId!)" type="text" style="width:95%" value="(!@-!)out.push(dataViews.PaymentOuts.getFilter('Date','*'));(!@+!)" onkeypress="var e = (event) ? event : window.event;char=(e.charCode)?e.charCode:e.keyCode;if(char==13){$j('#Filter_(!&ns._ViewId!)').click();}"/></td>

<td><input id="Filter_PaymentOut_PaymentType_List(!&ns._ViewId!)" type="text" style="width:95%" value="(!@-!)out.push(dataViews.PaymentOuts.getFilter('PaymentType','*'));(!@+!)" onkeypress="var e = (event) ? event : window.event;char=(e.charCode)?e.charCode:e.keyCode;if(char==13){$j('#Filter_(!&ns._ViewId!)').click();}"/></td>

<td><input id="Filter_PaymentOut_ProjectId_List(!&ns._ViewId!)" type="text" style="width:95%" value="(!@-!)out.push(dataViews.PaymentOuts.getFilter('ProjectId','*'));(!@+!)" onkeypress="var e = (event) ? event : window.event;char=(e.charCode)?e.charCode:e.keyCode;if(char==13){$j('#Filter_(!&ns._ViewId!)').click();}"/></td>

<td><input id="Filter_PaymentOut_OutKr_List(!&ns._ViewId!)" type="text" style="width:95%" value="(!@-!)out.push(dataViews.PaymentOuts.getFilter('OutKr','*'));(!@+!)" onkeypress="var e = (event) ? event : window.event;char=(e.charCode)?e.charCode:e.keyCode;if(char==13){$j('#Filter_(!&ns._ViewId!)').click();}"/></td>

<td><input id="Filter_PaymentOut_AddedBy_List(!&ns._ViewId!)" type="text" style="width:95%" value="(!@-!)out.push(dataViews.PaymentOuts.getFilter('AddedBy','*'));(!@+!)" onkeypress="var e = (event) ? event : window.event;char=(e.charCode)?e.charCode:e.keyCode;if(char==13){$j('#Filter_(!&ns._ViewId!)').click();}"/></td>

<td><input id="Filter_PaymentOut_PaymentSource_List(!&ns._ViewId!)" type="text" style="width:95%" value="(!@-!)out.push(dataViews.PaymentOuts.getFilter('PaymentSource','*'));(!@+!)" onkeypress="var e = (event) ? event : window.event;char=(e.charCode)?e.charCode:e.keyCode;if(char==13){$j('#Filter_(!&ns._ViewId!)').click();}"/></td>
<td></td>
</tr></thead><tbody>
(!@-!)
var r;
var totOut=0;
for(var ri=0;ri<ns.data.length;ri++) {
r = ns.data[ri];
totOut += parseFloat(r.OutKr);
(!@+!)
<tr >

<td ><a class=ajaxLink href=Pages/PaymentOut/(!&r.Id!)>(!&r.Id!)</a></td>

<td >(!&r['Date']!)</td>

<td >(!&r['PaymentType']!)</td>

<td ><a class=ajaxLink href=Pages/Project/(!&r.ProjectId!)>(!&r.ProjectId!)</a></td>

<td style='text-align:right'>(!@-!)out.push(dataConvert.toSEK(r['OutKr']))(!@+!)</td>

<td >(!&r['AddedBy']!)</td>

<td >(!&r['PaymentSource']!)</td>

<td ><span class="DeleteIcon" style="width:32px;height:16px;cursor:pointer;">
    <a onclick="
if (confirm('&Auml;r du s&auml;ker p&aring; att du vill ta bort betalningen?')) {
$.post('do/paymentOutPreview.php?action=del&Id=(!&r.Id!)',{},function(response) {
    dataViews.PaymentOuts.clearFilter();
    var mainId = document.getElementById('mainPaymentViewId').value;
    dataViews.PaymentOuts.setFilter('Date','=',document.getElementById('PaymentOut_Date_New'+mainId).value);
    //dataViews.PaymentOuts.addFilter('PaymentSource','=',document.getElementById('PaymentSource653'+mainId).value);
    dataViews.PaymentOuts.getList({
    OnComplete:function(data,Recordset,DataView){
        App3.Navigate2('local/Pages/PaymentOuts',{navTarget:'PaymentList',target:'PaymentList',data:data,Recordset:Recordset,DataView:DataView });
    }});
});
}
" >&nbsp;&nbsp;&nbsp;&nbsp;</a>
</span></td>

</tr>
(!@-!)}
if (ns.data.length == 0) {//no rows code.(!@+!)
<tr><td colspan="17"><center>Ingen</center></td></tr>
(!@-!) } (!@+!)
</tbody>

(!@-!)} else {
//no data retrieved yet... load it..
(!@+!)<script>
dataViews.PaymentOuts.getList({OnComplete:function(data,Recordset,DataView){App3.Navigate2("(!&ns._fullurl!)",{navTarget:'(!&ns.target!)',target:'(!&ns.target!)',data:data,Recordset:Recordset,DataView:DataView ,Date:'(!&ns.Date!)'});}});

</script><img src="img/ajaxLoading.gif"/>ladda...
(!@-!)}(!@+!)
<tr>
<td colspan=3></td>
    <td>Tot</td>
    <th>(!@-!)out.push(dataConvert.toSEK(totOut))(!@+!)</th>
<td colspan=3></td>
</tr><button onclick="
 document.getElementById('PaymentReport').src = 'pdf/ManualOutPayments.php?PaymentSource=utbet&Date='+$('#PaymentOut_Date_New(!&ns.PaymentViewId!)').val()+'&rnd='+Math.random();  
"><img src="img/file_pdf.png" width=24 height=24/> Utbetalningsrapport</button>
<iframe style="width:0px;height:0px;" id="PaymentReport" src="about:blank"></iframe>
